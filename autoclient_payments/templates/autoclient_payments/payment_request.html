{% extends "autoclient_payments/base.html" %}

{% block content %}

{% with href_home=url_for("app_views.index") %}
{% with href_payments=url_for("autoclient_payments_views.payment_list") %}
<div class="breadcrumbs-payment mt-3">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a class="black-text" href="{{ href_home }}">Головна</a>
                <i class="fas fa-caret-right ml-1" aria-hidden="true"></i>
            </li>
            <li class="breadcrumb-item">
                <a class="black-text" href="{{ href_payments }}">Оплати з автоклієнта</a>
                <i class="fas fa-caret-right ml-1" aria-hidden="true"></i>
            </li>
            <li class="breadcrumb-item active">Запит операцій</li>
        </ol>
    </nav>
</div>
{% endwith %}
{% endwith %}

{% if not AUTOCLIENT_PAYMENT_COMPLAINT_PROCESSING_ENABLED %}
<div class="alert badge-danger">
  <i class="fas fa-exclamation mr-2"></i> Обробка скарг вимкнена
</div>
{% endif %}

{% if not SYNC_AUTOCLIENT_PAYMENTS_RESOLUTIONS %}
<div class="alert badge-danger">
  <i class="fas fa-exclamation mr-2"></i> Обробка рішень вимкнена
</div>
{% endif %}

{% if fake %}
<div class="alert badge-danger">
    <i class="fas fa-exclamation mr-2"></i> Увімкнено тестові дані
</div>
{% endif %}

{% include 'autoclient_payments/partials/toolbar_links.html' %}

<div class="btn-toolbar mt-3" role="toolbar">

    <div class="mb-3 mr-2">
        {% with label='Дата операції' %}
        {% with arg_from='date_from' %}
        {% with arg_to='date_to' %}
        {% include 'autoclient_payments/partials/filter_rangepicker.html' %}
        {% endwith %}
        {% endwith %}
        {% endwith %}
    </div>

    <div class="mb-3 mx-1">
        {% with label='Статус операції' %}
        {% with arg='status' %}
        {% with choices=status_choices %}
        {% include 'autoclient_payments/partials/filter_dropdown.html' %}
        {% endwith %}
        {% endwith %}
        {% endwith %}
    </div>

    <div class="mb-3 mx-1">
        {% with label='Операцію збережено' %}
        {% with arg='saved' %}
        {% with choices=saved_choices %}
        {% include 'autoclient_payments/partials/filter_dropdown.html' %}
        {% endwith %}
        {% endwith %}
        {% endwith %}
    </div>

</div>

<div class="table-responsive mb-3">
    {% include 'autoclient_payments/partials/table_request.html' %}
</div>

{% endblock %}

{% block scripts %}

{{ super() }}

{% include 'autoclient_payments/partials/filter_rangepicker_script.html' %}

<script type="text/javascript">
    $.get("/autoclient_payments/healthcheck").fail(function () {
        $("#status").toggleClass("btn-success btn-danger")
    });
</script>

{% endblock %}
