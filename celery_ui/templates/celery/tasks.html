{% extends "celery/base.html" %}

{% block content %}
    <h4 class="mt-3">Tasks</h4>
    <div class="btn-toolbar btn-toolbar-feed float-right mb-2" role="toolbar">
        <div class="mx-1">
            {% with url=url_for(request.endpoint) %}
            {% with is_inspect=request.args.get('inspect') != '1' %}
            <a href="{{ url }}{% if is_inspect %}?inspect=1{% endif %}"
               class="btn btn-sm btn-feed btn-success btn-submit-form z-depth-0">
                {% if is_inspect %}Inspect{% else %}Events{% endif %}
            </a>
            {% endwith %}
            {% endwith %}
            <button class="btn btn-sm btn-feed btn-success z-depth-0 mr-0"
                    onClick="window.location.reload();">
                Refresh
            </button>
        </div>
    </div>
    <div class="btn-toolbar btn-toolbar-feed float-left mb-2" role="toolbar">
        <div class="mx-1">
            {% with arg='search' %}
            {% include 'celery/partials/filter_search.html' %}
            {% endwith %}
        </div>
    </div>
    {% with data=tasks %}
    <div class="table-responsive mb-2 mt-2">
    {% include 'celery/partials/table_tasks.html' %}
    </div>
    {% endwith %}
{% endblock %}

{% block scripts %}
{{ super() }}
{% include 'celery/partials/form_sumbit_script.html' %}
{% endblock %}
